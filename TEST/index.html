<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title></title>
	<script type="text/javascript" src="jquery.js"></script> 
	<script type="text/javascript" src="ZipLoader.js"></script>
</head>
<body>
	<button type="button" id="button">load 221KB ZIP and extract 495 images</button>

    <img src="" id="temp" />
	<img src="" id="temp2" />

    <script type="text/javascript">

        var loader = new ZipLoader('./footImages.zip');

		// on progress
		loader.on( 'progress', function ( e ) {
			console.log(
				'loading',
				e.loaded / e.total * 100 + '%',
				'time:' + e.elapsedTime + 'ms'
			);
		} );
		
		// on load
		loader.on( 'load', function ( e ) {
			Object.keys( loader.files ).forEach( function ( filename ) {
				var img = new Image();
				var url = loader.extractAsBlobUrl( filename, 'image/png' );
				img.onload = function () {
					//document.getElementById("temp").src( img );
					document.body.appendChild( img );
					loader.clear( filename );
				}
				img.src = url;
			} );
		} );

		// on button click
		document.getElementById( 'button' ).addEventListener( 'click', function ( e ) {
			loader.load();
			e.target.disabled = true;
		} );


    </script>


</body>

</html>
