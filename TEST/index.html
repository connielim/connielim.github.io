<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title></title>
	<script type="text/javascript" src="jquery.js"></script> 
	<script type="text/javascript" src="ZipLoader.js"></script>
</head>
<body>
	<button type="button" id="button">load 221KB ZIP and extract 495 images</button>

    <img src="" id="temp" />
	<img src="" id="temp2" />

    <script type="text/javascript">

        var loader = new ZipLoader('./footImages.zip');

		// on progress
		loader.on( 'progress', function ( e ) {
			console.log(
				'loading',
				e.loaded / e.total * 100 + '%',
				'time:' + e.elapsedTime + 'ms'
			);
		} );
		
		// on load
		/*loader.on( 'load', function ( e ) {
			Object.keys( loader.files ).forEach( function ( filename ) {
				var img = new Image();
				var url = loader.extractAsBlobUrl( filename, 'image/png' );
				img.onload = function () {
					//document.getElementById("temp").src( img );
					document.body.appendChild( img );
					loader.clear( filename );
				}
				img.src = url;
			} );
		} );*/
		
		// on load
		loader.on( 'load', function ( e ) {
			Object.keys( loader.files ).forEach( function ( filename ) {
				alert(filename);
				var img = new Image();
				var url = loader.extractAsBlobUrl( filename, 'image/png' );
				img.onload = function () {
					//document.getElementById("temp").src( img );
					document.body.appendChild( img );
					loader.clear( filename );
				}
				img.src = url;
			} );
		} );
		
		/*loader.on( 'load', function ( e ) {
			Object.keys( loader.files ).find( function ( filename ) {
				return filename == "Step_1_LEFT_Frame_0";}).then(function(footImageLeft){
					var img = new Image();
					var url = loader.extractAsBlobUrl( filename, 'image/png' );
					img.onload = function () {
						//document.getElementById("temp").src( img );
						//document.body.appendChild( img );
						loader.clear( filename );
					}
					document.getElementById("temp").src( img );
					//img.src = url;
				});
		} );*/
		
		
		
		
		/*zip.generateAsync({type:"blob"}).then(function (blob) { // 1) generate the zip file
			//saveAs(blob, "hello.zip");                          // 2) trigger the download
			zip.loadAsync(blob).then(function(zip){
			return zip.file("bob.txt").async("string");}).then(function (text) {
				alert(text);
			});
		}, function (err) {
			jQuery("#blob").text(err);
		});*/
		
		
		
		


		// on button click
		document.getElementById( 'button' ).addEventListener( 'click', function ( e ) {
			loader.load();
			e.target.disabled = true;
		} );


    </script>


</body>

</html>
